\documentclass[a4paper]{article}
\usepackage{styledcmd}
    \newstyledcmd{saluto}{Ciao}[1]{Ciao #1}
    \newstyledcmd{saluto}{Buongiorno}[1]{Buondì #1}

\title{Comandi con stili multipli}
\author{}
\begin{document}
\maketitle
\section{Come si include nel progetto?}
Basta avere il file \verb+styledcmd.tex+ nel proprio progetto ed inserire nel preambolo il comando \verb+\input{styledcmd.tex}+.

\section{Come si usa?}
Il pacchetto permette di creare comandi con più stili associati, che di volta in volta possono essere scelti in base alle esigenze dell'editore.

Per creare un comando si usa la macro

\verb+\newstyledcmd{+\textit{nomecomando}\verb+}{+\textit{nomestile}\verb+}[+\textit{numero argomenti}\verb+]{+\textit{corpo funzione}\verb+}+

Tenendo presente che il nome comando non deve avere il \verb+\+ davanti. Si usa il comando per ciascuno stile che si vuole creare, per esempio le istruzioni
\begin{verbatim}
    \newstyledcmd{saluto}{Ciao}[1]{Ciao #1}
    \newstyledcmd{saluto}{Buongiorno}[1]{Buondì #1}
\end{verbatim}
definiscono i due stili \verb+Ciao+ e \verb+Buongiorno+ per il comando \verb+\saluto+. Lo stile utilizzato può essere passato come parametro opzionale del comando, che altrimenti utilizzerà il primo stile definito. Quindi i comandi
\begin{verbatim}
    \saluto{zio}
    \saluto[Ciao]{zio}
    \saluto[Buongiorno]{zio}
\end{verbatim}
ritorneranno rispettivamente\\
\saluto{zio}\\
\saluto[Ciao]{zio}\\
\saluto[Buongiorno]{zio}

La sintassi è la stessa di \verb+\newcommand+ tranne solo per il secondo parametro obbligatorio che indica lo stile e l'assenza del backslash \verb+\+ per definire il nome del comando.
    
\section{Come si cambia lo stile di default?}
Per settare lo stile di default del comando \verb+\saluto+ a \verb+Buongiorno+ si usa il comando
\begin{verbatim}
    \setGlobalStyle{saluto}{Buongiorno}
\end{verbatim}
nel preambolo. \setGlobalStyle{saluto}{Buongiorno}

Dando questo comando nel preambolo l'output dei comandi precedenti sarà invece\\
\saluto{zio}\\
\saluto[Ciao]{zio}\\
\saluto[Buongiorno]{zio}

\section{Personalizzazione dei parametri con \texttt{xparse}}
\verb+styledcmd+ carica automaticamente il pacchetto \verb+xparse+ per gestire la forma dei parametri. Inoltre è possibile definire nuovi comandi con differenti stili con la stessa sintassi di \verb+\NewDocumentCommand+ tramite la macro

\verb+\NewDocStyledCMD{+\textit{nomecomando}\verb+}{+\textit{nomestile}\verb+}{+\textit{formatoargomenti}\verb+}{+\textit{corpo funzione}\verb+}+

     \NewDocStyledCMD{prova}{stilea}{r<>}{Stile 1 #1}
     \NewDocStyledCMD{prova}{stileb}{r<>}{Stile 2 #1}
Possiamo ad esempio creare due stili
\begin{verbatim}
     \NewDocStyledCMD{prova}{stilea}{r<>}{Stile 1 #1}
     \NewDocStyledCMD{prova}{stileb}{r<>}{Stile 2 #1}
\end{verbatim}
in modo da poter scrivere
\begin{verbatim}
    \prova<ciao>
    \prova[stilea]<ciao>
    \prova[stileb]<ciao>
\end{verbatim}
che saranno rispettivamente equivalenti ad\\
    \prova<ciao>\\
    \prova[stilea]<ciao>\\
    \prova[stileb]<ciao>
    
\section{Gruppi di comandi}
Con la versione \verb+2.0+ di \verb+styledcmd+ è possibile definire anche gruppi di comandi che condividono un medesimo stile e che quindi un cambiamento dello stile globale deve influenzare tutti i comandi in tale gruppo.

Per definire un gruppo ed uno stile si utilizza la macro

\verb+\defGroupStyle{+\textit{nomegruppo}\verb+}{+\textit{nomestile}\verb+}+

e tutti i comandi definiti tramite la macro \verb+\newgstyledcmd+, che funziona esattamente come \verb+\newcommand+ tranne che il nome del comando non deve avere il backslash, che lo seguono apparterranno al gruppo e allo stile specificato da \verb+\defGroupStyle+. Per cambiare gruppo e/o stile si esegue la macro \verb+\defGroupStyle+ con i nuovi parametri e si ridefiniscono i comandi.

Per cambiare lo stile predefinito dei comandi contenuti in un particolare gruppo si usa la macro

\verb+\setGroupStyle{+\textit{nomegruppo}\verb+}{+\textit{nomestile}\verb+}+

che influenzerà tutti i comandi a seguire nel gruppo selezionato. È doveroso a questo punto fare almeno un esempio pratico. Consideriamo le seguenti linee di codice LaTeX

    \defGroupStyle{saluti}{formali}
    \newgstyledcmd{ciao}[1]{Buongiorno #1}
    \newgstyledcmd{via}{Arrivederci}
    
    \defGroupStyle{saluti}{informali}
    \newgstyledcmd{ciao}[1]{Ciao #1}
    \newgstyledcmd{via}{Ciaooooo}

\begin{verbatim}
    \defGroupStyle{saluti}{formali}
    \newgstyledcmd{ciao}[1]{Buongiorno #1}
    \newgstyledcmd{via}{Arrivederci}
    
    \defGroupStyle{saluti}{informali}
    \newgstyledcmd{ciao}[1]{Ciao #1}
    \newgstyledcmd{via}{Ciaooooo}
\end{verbatim}
con lo stile di default i comandi \verb+\ciao{Enrico}+ e \verb+\via+ espanderanno rispettivamente come \ciao{Enrico} e \via{} in quanto lo stile di default del gruppo \verb+saluti+ è lo stile \verb+formale+.

Se ora viene lanciato il comando \setGroupStyle{saluti}{informali}
\begin{verbatim}
    \setGroupStyle{saluti}{informali}
\end{verbatim}
gli stessi comandi ora espanderanno come \ciao{Enrico} e \via{} seguendo lo stile \verb+informali+.

\end{document}
